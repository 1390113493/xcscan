import{r as e,C as s,o as a,c as i,w as t,a as n,b as d,t as u,e as l,d as r,f as g,h as c,H as o,i as m,g as p}from"./index.181fe990.js";import{_ as f,b,g as h,r as _,d as x,a as y,c as k}from"./storage.c59ed215.js";import{_ as v}from"./uni-card.058dd26d.js";var C=f({data:()=>({buildings:[],index:0,imgBase64:"",updateTime:""}),methods:{bindPickerChange:function(e){this.index=e.detail.value,this.getQR()},getQR(){let s=this.buildings[this.index].id;e({url:b+"qr/"+s,success:e=>{this.message=e.data.msg,this.imgBase64=e.data.data.qr,this.$refs.success.open("top")}})}},onLoad(){let a=h("exptime"),i=Date.now();(!a||i>a)&&s({url:"/admin/export/export"}),e({url:b+"buildings",success:e=>{this.buildings=e.data.data,this.getQR()}})}},[["render",function(e,s,f,b,h,C){const j=_(g("uni-popup-message"),x),q=_(g("uni-popup"),y),B=c,Q=o,R=_(g("uni-card"),v),w=m,P=p,D=_(g("copyright"),k);return a(),i(B,null,{default:t((()=>[n(q,{ref:"success",type:"message"},{default:t((()=>[n(j,{type:"success",message:e.message,duration:2e3},null,8,["message"])])),_:1},512),n(R,{title:"当前选择",extra:"选择记录的系/地点"},{default:t((()=>[h.buildings.length>0?(a(),i(B,{key:0,class:"uni-list-cell-db"},{default:t((()=>[n(Q,{onChange:C.bindPickerChange,value:h.index,range:h.buildings,"range-key":"name"},{default:t((()=>[n(B,{class:"uni-input"},{default:t((()=>[d(u(h.buildings[h.index].name),1)])),_:1})])),_:1},8,["onChange","value","range"])])),_:1})):l("",!0)])),_:1}),h.buildings.length>0?(a(),i(B,{key:0,class:"qr"},{default:t((()=>[n(w,null,{default:t((()=>[d("请使用微信-扫一扫 扫描该二维码")])),_:1}),r("br"),r("br"),n(B,null,{default:t((()=>[n(P,{src:h.imgBase64,mode:"aspectFit"},null,8,["src"]),r("br"),n(w,{class:"building"},{default:t((()=>[d(u(h.buildings[h.index].name),1)])),_:1})])),_:1})])),_:1})):l("",!0),r("br"),n(D)])),_:1})}],["__scopeId","data-v-e236a9f0"]]);export{C as default};
